<% content_for :title, "My Profile" %>
<% content_for :main_class, "flex-1 pt-28 pb-20 px-6 flex items-center" %>
<% content_for :content_class, "max-w-5xl mx-auto w-full" %>

<!-- Two Column Layout -->
<div class="grid lg:grid-cols-[1fr_2fr] gap-6">
  <!-- Left: Profile Header -->
  <div class="glass-card rounded-2xl p-6 opacity-0 animate-fadeIn">
    <div class="flex flex-col items-center text-center">
      <!-- Avatar -->
      <div class="mb-4">
        <% if @user.avatar.present? %>
          <img src="<%= @user.avatar.data_uri %>" alt="Profile picture" 
               class="w-24 h-24 rounded-full object-cover border-2 border-white/10" />
        <% else %>
          <div class="w-24 h-24 rounded-full bg-white/5 border-2 border-white/10 flex items-center justify-center" data-testid="profile-picture-placeholder">
            <svg class="w-10 h-10 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </div>
  <% end %>
      </div>

      <!-- Name and Bio -->
      <h1 class="text-2xl font-bold tracking-tight mb-1">
        <%= @user.display_name.presence || @user.email&.split('@')&.first || 'User' %>
      </h1>
      <p class="text-gray-400 text-sm mb-3"><%= @user.email %></p>
      <% if @user.bio.present? %>
        <p class="text-gray-300 text-sm mb-4"><%= @user.bio %></p>
      <% else %>
        <p class="text-gray-500 italic text-sm mb-4">No bio set</p>
  <% end %>

      <!-- Edit Button -->
      <%= link_to edit_profile_path, class: "inline-flex items-center gap-2 px-5 py-2 text-sm font-semibold rounded-full bg-white text-black hover:bg-gray-200 transition-colors duration-200" do %>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
        </svg>
        Edit Profile
      <% end %>
    </div>
  </div>

  <!-- Right: Profile Details -->
  <div class="glass-card rounded-2xl p-6 opacity-0 animate-fadeIn" style="animation-delay: 0.1s;">
    <h2 class="text-xl font-bold mb-4">Profile Details</h2>

    <div class="grid md:grid-cols-2 gap-3">
      <div class="p-3 rounded-lg bg-white/5">
        <p class="text-xs text-gray-400 mb-0.5">Budget</p>
        <p class="text-base text-white font-medium">
          <%= @user.budget.present? ? @user.budget : 'Not set' %>
        </p>
      </div>

      <div class="p-3 rounded-lg bg-white/5">
        <p class="text-xs text-gray-400 mb-0.5">Preferred Location</p>
        <p class="text-base text-white font-medium"><%= @user.preferred_location.presence || 'Not set' %></p>
      </div>

      <div class="p-3 rounded-lg bg-white/5">
        <p class="text-xs text-gray-400 mb-0.5">Sleep Schedule</p>
        <p class="text-base text-white font-medium"><%= @user.sleep_schedule.presence || 'Not set' %></p>
      </div>

      <div class="p-3 rounded-lg bg-white/5">
        <p class="text-xs text-gray-400 mb-0.5">Pets</p>
        <p class="text-base text-white font-medium"><%= @user.pets.presence || 'Not set' %></p>
      </div>

      <div class="p-3 rounded-lg bg-white/5">
        <p class="text-xs text-gray-400 mb-0.5">Housing Status</p>
        <p class="text-base text-white font-medium"><%= @user.housing_status.presence || 'Not set' %></p>
      </div>

      <div class="p-3 rounded-lg bg-white/5">
        <p class="text-xs text-gray-400 mb-0.5">Contact Visibility</p>
        <p class="text-base text-white font-medium"><%= @user.contact_visibility.presence || 'Not set' %></p>
      </div>
    </div>
  </div>
</div>
