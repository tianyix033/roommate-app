<% content_for :title, @listing.title %>
<% content_for :content_class, "max-w-4xl mx-auto" %>

<!-- Back button -->
<div class="mb-6 opacity-0 animate-fadeIn">
  <a href="<%= listings_path %>" class="inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors text-sm">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
    </svg>
    Back to listings
  </a>
</div>

<!-- Listing Card -->
<div class="glass-card rounded-2xl p-8 opacity-0 animate-fadeIn" style="animation-delay: 0.1s;">
  <!-- Header -->
  <div class="flex flex-wrap items-start justify-between gap-4 mb-6">
    <div>
      <div class="flex items-center gap-3 mb-2">
        <% if @listing.status == 'verified' %>
          <span class="flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500 text-white text-xs font-semibold">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            Verified
          </span>
        <% elsif @listing.status == 'pending' %>
          <span class="px-3 py-1 text-xs font-semibold rounded-full bg-gray-500/10 text-gray-400 border border-gray-500/20">Pending</span>
        <% elsif @listing.status == 'rejected' %>
          <span class="px-3 py-1 text-xs font-semibold rounded-full bg-red-500/10 text-red-400 border border-red-500/20">Rejected</span>
        <% else %>
          <span class="px-3 py-1 text-xs font-semibold rounded-full bg-gray-500/10 text-gray-400 border border-gray-500/20">Pending</span>
        <% end %>
      </div>
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight text-white"><%= @listing.title %></h1>
    </div>
    <div class="text-right">
      <p class="text-3xl md:text-4xl font-bold text-white">$<%= number_with_precision(@listing.price, precision: 1) %></p>
      <p class="text-gray-400 text-sm">per month</p>
    </div>
  </div>

  <!-- Location -->
  <div class="flex items-center gap-2 text-gray-400 mb-6 pb-6 border-b border-white/10">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
    </svg>
    <span class="text-lg"><%= @listing.city %></span>
  </div>

  <!-- Description -->
  <div class="mb-8">
    <h2 class="text-lg font-semibold text-white mb-3">Description</h2>
    <p class="text-gray-300 leading-relaxed"><%= @listing.description %></p>
  </div>

  <!-- Contact Info -->
  <div class="p-4 rounded-xl bg-white/5 mb-8">
    <h2 class="text-lg font-semibold text-white mb-2">Contact</h2>
    <div class="flex items-center gap-2 text-gray-300">
      <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
      </svg>
      <a href="mailto:<%= @listing.owner_email %>" class="hover:text-[#FFFC00] transition-colors"><%= @listing.owner_email %></a>
    </div>
  </div>

  <!-- Actions -->
  <div class="flex flex-wrap items-center gap-3 pt-6 border-t border-white/10">
    <%= link_to edit_listing_path(@listing), class: "inline-flex items-center gap-2 px-6 py-3 text-sm font-semibold rounded-full bg-white text-black hover:bg-gray-200 transition-colors duration-200" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
      </svg>
      Edit Listing
<% end %>

    <%= button_to listing_path(@listing), method: :delete, data: { turbo_confirm: 'Are you sure you want to delete this listing?' }, class: "inline-flex items-center gap-2 px-6 py-3 text-sm font-semibold rounded-full text-white hover:opacity-80 transition-opacity duration-200", style: "background-color: oklch(75% 0.183 55.934);" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
      </svg>
      Delete Listing
    <% end %>

<% if @listing.verification_requested && !@listing.verified %>
      <%= button_to verify_listing_path(@listing), method: :patch, class: "inline-flex items-center gap-2 px-6 py-3 text-sm font-semibold rounded-full bg-green-500/20 text-green-400 border border-green-500/30 hover:bg-green-500/30 transition-colors duration-200" do %>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        Mark as Verified
      <% end %>
<% end %>
  </div>
</div>
