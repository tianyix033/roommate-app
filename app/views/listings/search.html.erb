<div class="max-w-3xl mx-auto px-4 py-6">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">Search Listings</h1>

  <%= form_with url: search_listings_path, method: :get, local: true, class: "bg-white shadow p-6 rounded-lg space-y-4" do %>
    <div class="flex flex-col">
      <%= label_tag :city, 'City', class: "mb-1 font-semibold text-gray-700" %>
      <%= text_field_tag :city, @filters[:city], placeholder: 'e.g., New York', class: "px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" %>
    </div>

    <div class="flex flex-col">
      <%= label_tag :min_price, 'Min Price', class: "mb-1 font-semibold text-gray-700" %>
      <%= number_field_tag :min_price, @filters[:min_price], min: 0, class: "px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" %>
    </div>

    <div class="flex flex-col">
      <%= label_tag :max_price, 'Max Price', class: "mb-1 font-semibold text-gray-700" %>
      <%= number_field_tag :max_price, @filters[:max_price], min: 0, class: "px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" %>
    </div>

    <div class="flex flex-col">
      <%= label_tag :keywords, 'Keywords', class: "mb-1 font-semibold text-gray-700" %>
      <%= text_field_tag :keywords, @filters[:keywords], placeholder: 'e.g., furnished', class: "px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" %>
    </div>

    <div>
      <%= submit_tag 'Search', class: "w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition" %>
    </div>
  <% end %>

  <section class="mt-6 space-y-4">
    <% if @listings.any? %>
      <ul class="space-y-4">
        <% @listings.each do |listing| %>
          <li class="bg-white shadow p-4 rounded-lg hover:bg-gray-50 transition cursor-pointer"
              onclick="window.location='<%= listing_path(listing) %>'">
            <p class="font-semibold text-gray-800 text-lg"><%= listing.title %></p>
            <p class="text-gray-600">City: <%= listing.city %></p>
            <p class="text-gray-600">Price: <%= number_to_currency(listing.price) %></p>
            <p class="italic text-gray-700 mt-2"><%= listing.description %></p>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-gray-600">No listings found matching your search criteria.</p>
    <% end %>
  </section>
</div>
